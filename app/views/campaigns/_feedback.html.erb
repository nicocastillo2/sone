<br>

<div class="row feedback-answer-titles">
  <div class="col-md-2 col-md-offset-2 col-sm-2 col-sm-offset-2 data-feed-back">
    <h4><%= t("views.campaigns.feedback.subtitle1", sample: @nps_sample_count) %></h4>
    <div class="feedback-stat-first">
      <span class="feedback-icon-info text-center" id="selected-date-feedback"><%= @date_range %></span>
    </div>
  </div>
  <div class="col-md-2 col-sm-2">
    <h4><%= t("views.campaigns.feedback.subtitle2") %></h4>
    <div class="feedback-stat">
      <span class="feedback-icon-info" data-feedback-type='promoter'>
        <%= fa_icon 'smile-o', class: 'feedback-icon' %> <%= @data_percentages[:promoters].round %> %
      </span>
    </div>
  </div>
  <div class="col-md-2 col-sm-2">
    <h4><%= t("views.campaigns.feedback.subtitle3") %></h4>
    <div class="feedback-stat">
      <span class="feedback-icon-info" data-feedback-type='passive'>
        <%= fa_icon 'meh-o', class: 'feedback-icon' %> <%= @data_percentages[:passives].round %> %
      </span>
    </div>
  </div>
  <div class="col-md-2 col-sm-2">
    <h4><%= t("views.campaigns.feedback.subtitle4") %></h4>
    <div class="feedback-stat">
      <span class="feedback-icon-info" data-feedback-type='detractor'>
        <%= fa_icon 'frown-o', class: 'feedback-icon' %> <%= @data_percentages[:detractors].round %> %
      </span>
    </div>
  </div>
</div>

<br>

<div class="row">
  <% @contacts_feedback.each do |answer| %>
    <div class="row feedback-answer container-fluid">
      <div class="col-md-8 col-md-offset-2">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">
              <%= fa_icon(Answer.get_icon(answer.score), class: 'feedback-icon') %>
              <span class="feedback-answer-date">
                <span class="contact-info-answer"><%= answer.contact.name %>,</span>
              </span>
              <span class="feedback-answer-date">
                <span class="contact-info-answer"><%= answer.contact.email %></span>
              </span>
              <span class="feedback-answer-date pull-right">
                <%= answer.created_at.strftime("%d / %m / %Y") %>
              </span>
            </h4>
          </div>
          <div class="panel-body">
            <% if answer.comment.blank? %>
              <h5 class="text-center"><%= t("views.campaigns.feedback.panel_body") %></h5>
            <% else %>
              <%= answer.comment %>
            <% end %>
          </div>
          <div class="panel-footer">
            <% unless answer.contact.topics.empty? %>
              <% answer.contact.topics.each do |topic, value| %>
                <% if params[:topics].include?(topic) %>
                  <span class="feedback-answer-footer">
                  <span class="answer-footer-topic"><%= Campaign.translated_topics[topic]  %>:</span> <span class="answer-footer-topic-value"><%= value %></span>
                  </span>
                <% end %>
                
              <% end %>
            <% else %>
              <div class="text-center">
                <span class="feedback-answer-footer">t("views.campaigns.feedback.panel_footer") %></span>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="row">
  <div class="col-md-10 col-md-offset-2">
    <%= will_paginate @contacts_feedback, previous_label: t("views.campaigns.feedback.previous"), next_label: t("views.campaigns.feedback.next"),  inner_window: 3, outer_window: 1 %>
  </div>
</div>
